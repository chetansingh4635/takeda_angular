<div class="dHeader">
  <p class="mt-3"> Add Site Coordinator
    <img (click)="closeDialog()" class="cancel-icon" src="./assets/img/icons/close-button.svg" alt="">
  </p>
</div>
<div class="dialog-container addSiteCoordinator">
  <form [formGroup]="form" novalidate>
    <div class="row">
      <div class="col-md">
        <div class="form-group row">
          <label for="subjectEmail">Site Location</label>
        </div>
        <div class="row">
          <input type="text" class="form-control mb-4" formControlName="siteLocation" placeholder="Select Site Location">
        </div>
      </div>
      <div class="col-md">
        <div class="form-group row">
          <label for="subjectEmail">Site ID</label>
        </div>
        <div class="row">
          <input type="text" class="form-control mb-4" formControlName="siteId" placeholder="Select Site ID">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md">
        <div class="form-group row">
          <label for="subjectEmail">CRO/PI Name</label>
        </div>
        <div class="row">
          <input type="text" class="form-control mb-4 arrowRight" formControlName="siteLocation" placeholder="Select CRO/PI Name">
        </div>
      </div>
      <div class="col-md">
        <div class="form-group row">
          <label for="subjectEmail">IRB Name</label>
        </div>
        <div class="row">
          <input type="text" class="form-control mb-4 arrowRight" formControlName="siteId" placeholder="Select IRB Name">
        </div>
      </div>
    </div>
     <div class="row" formArrayName="siteCoordinator" *ngFor="let item of form['controls'].siteCoordinator['controls']; let i = index;">
      <div [formGroupName]="i" class="row">
        <div class="col-md">
          <div class="form-group row">
            <label for="name">Site Coordinator</label>
          </div>
          <div class="row" [ngClass]="{'isInvalid' :(form['controls'].siteCoordinator['controls'][i]['controls'].name.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].name.touched) ||(form['controls'].siteCoordinator['controls'][i]['controls'].name.errors?.required && submitted)}">
            <input type="text" class="form-control mb-4" formControlName="name" placeholder="Site Coordinator">
          
          <span class="row input-padding error-message" *ngIf="(form['controls'].siteCoordinator['controls'][i]['controls'].name.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].name.touched) ||(form['controls'].siteCoordinator['controls'][i]['controls'].name.errors?.required && submitted)">
            *Please enter valid Site Coordinator
          </span></div>

        </div>
        <!-- <div class="col-md">
          <div class="form-group row">
            <label for="subjectEmail">Site Email ID</label>
          </div>
          <div class="row"[ngClass]="{'isInvalid' :(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched) ||(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && submitted)}">
            <input type="text" class="form-control mb-4 customEmail" formControlName="emailId" placeholder="Email ID">
         
          
          <span class="row input-padding error-message" *ngIf="(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched) ||(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && submitted)">
            *Please enter valid Site Email ID
          </span> </div>
        </div> -->
        <div class="col-md" [ngClass]="{'isInvalid' :((form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched)  ||(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.hasError('pattern') && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched)|| (form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && submitted))}">
            <div class="form-group row" >
              <label for="emailId">Email ID</label>
            </div>
            <div class="row">
              <input type="email" class="form-control mb-4"  formControlName="emailId" [pattern]="pattern" placeholder=" Email ID">
              <span class="row input-padding error-message" *ngIf="((form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched)  ||(form['controls'].siteCoordinator['controls'][i]['controls'].emailId.hasError('pattern') && form['controls'].siteCoordinator['controls'][i]['controls'].emailId.touched)|| (form['controls'].siteCoordinator['controls'][i]['controls'].emailId.errors?.required && submitted))">
                *Please enter valid alphanumeric Email ID 
              </span>
            </div>
          </div>


      </div>
      <img class="filterIcon addMoreDialog" *ngIf = "(form['controls'].siteCoordinator['controls'].length -1) === i" (click)="appendSiteCoordinator()" src="./assets/img/icons/add.svg" alt="">
    </div>
    <!-- <span (click)="appendSiteCoordinator()">Add</span> -->
    
</form>


<div class="d-flex flex-row row dialogButton">
  <div class="col-md">
    <div class="form-group row ">
      <button mat-raised-button class="primary saveButton col-md" flex-row-reverse (click)="saveSiteCoordinators()">Save</button>
    </div>
  </div>
</div>
</div>